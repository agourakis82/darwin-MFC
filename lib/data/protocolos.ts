/**
 * DATABASE DE PROTOCOLOS INTERATIVOS - DARWIN-MFC
 * ================================================
 * 
 * Protocolos cl√≠nicos com fluxogramas interativos
 */

import { ProtocoloInterativo } from '../types/protocolo-interativo';

export const protocolos: ProtocoloInterativo[] = [
  // ==========================================================================
  // PROTOCOLO: DIAGN√ìSTICO DE HIPERTENS√ÉO ARTERIAL
  // ==========================================================================
  {
    id: 'has-diagnostico',
    titulo: 'Diagn√≥stico de Hipertens√£o Arterial',
    subtitulo: 'Fluxograma para confirma√ß√£o diagn√≥stica de HAS',
    descricao: 'Protocolo para avalia√ß√£o e confirma√ß√£o diagn√≥stica de hipertens√£o arterial sist√™mica na APS.',
    categoria: 'diagnostico',
    ciap2Chapters: ['K'],
    entryNodeId: 'start',
    nodes: [
      {
        id: 'start',
        type: 'start',
        label: 'Paciente com PA elevada',
        sublabel: 'Primeira aferi√ß√£o ‚â•140/90 mmHg',
        position: { x: 250, y: 0 },
      },
      {
        id: 'confirmar-medicao',
        type: 'action',
        label: 'Confirmar medida',
        details: 'Repetir aferi√ß√£o ap√≥s 5 min de repouso, em ambos os bra√ßos. Usar o bra√ßo com maior PA.',
        position: { x: 250, y: 100 },
      },
      {
        id: 'pa-ainda-elevada',
        type: 'decision',
        label: 'PA ainda ‚â•140/90 mmHg?',
        position: { x: 250, y: 200 },
      },
      {
        id: 'normal',
        type: 'end',
        label: 'PA Normal',
        sublabel: 'Reavaliar em 1-2 anos',
        position: { x: 50, y: 300 },
      },
      {
        id: 'avaliar-emergencia',
        type: 'decision',
        label: 'PA ‚â•180/120 com sintomas?',
        details: 'Cefaleia intensa, altera√ß√£o visual, dispneia, dor tor√°cica',
        position: { x: 400, y: 300 },
      },
      {
        id: 'emergencia',
        type: 'warning',
        label: 'üö® EMERG√äNCIA HIPERTENSIVA',
        details: 'Encaminhar imediatamente para UPA/Hospital',
        position: { x: 600, y: 400 },
      },
      {
        id: 'solicitar-mapa',
        type: 'action',
        label: 'Solicitar MAPA ou MRPA',
        details: 'MAPA: m√©dia 24h ‚â•130/80\nMRPA: m√©dia ‚â•130/80 (7 dias)',
        position: { x: 250, y: 400 },
      },
      {
        id: 'aguardar-mapa',
        type: 'info',
        label: 'Aguardar resultado',
        details: 'Retorno em 2-4 semanas com exame',
        position: { x: 250, y: 500 },
      },
      {
        id: 'mapa-alterado',
        type: 'decision',
        label: 'MAPA/MRPA alterado?',
        position: { x: 250, y: 600 },
      },
      {
        id: 'jaleco-branco',
        type: 'end',
        label: 'Hipertens√£o do Jaleco Branco',
        sublabel: 'PA consult√≥rio alta, MAPA normal',
        position: { x: 50, y: 700 },
      },
      {
        id: 'confirma-has',
        type: 'action',
        label: '‚úÖ Confirma HAS',
        details: 'Diagn√≥stico estabelecido',
        position: { x: 400, y: 700 },
        quickAction: {
          id: 'dx-has',
          tipo: 'diagnostico',
          titulo: 'Diagn√≥stico HAS',
          conteudo: 'Hipertens√£o Arterial Sist√™mica - CID-10: I10',
        },
      },
      {
        id: 'estadiamento',
        type: 'calculate',
        label: 'Estadiar e estratificar risco',
        details: 'Est√°gio 1 (140-159/90-99)\nEst√°gio 2 (160-179/100-109)\nEst√°gio 3 (‚â•180/110)',
        position: { x: 400, y: 800 },
      },
      {
        id: 'exames-iniciais',
        type: 'action',
        label: 'Solicitar exames',
        details: 'Glicemia, Cr, K+, perfil lip√≠dico, EAS, ECG',
        position: { x: 400, y: 900 },
        quickAction: {
          id: 'exames-has',
          tipo: 'exames',
          titulo: 'Exames HAS',
          conteudo: 'Glicemia jejum, HbA1c, Creatinina, Pot√°ssio, Perfil lip√≠dico, √Åcido √∫rico, EAS, ECG',
        },
      },
      {
        id: 'fim-tratamento',
        type: 'end',
        label: 'Iniciar tratamento',
        sublabel: 'Ver protocolo de tratamento',
        position: { x: 400, y: 1000 },
      },
    ],
    edges: [
      { id: 'e1', source: 'start', target: 'confirmar-medicao', condition: 'proximo' },
      { id: 'e2', source: 'confirmar-medicao', target: 'pa-ainda-elevada', condition: 'proximo' },
      { id: 'e3', source: 'pa-ainda-elevada', target: 'normal', label: 'N√£o', condition: 'nao' },
      { id: 'e4', source: 'pa-ainda-elevada', target: 'avaliar-emergencia', label: 'Sim', condition: 'sim' },
      { id: 'e5', source: 'avaliar-emergencia', target: 'emergencia', label: 'Sim', condition: 'sim' },
      { id: 'e6', source: 'avaliar-emergencia', target: 'solicitar-mapa', label: 'N√£o', condition: 'nao' },
      { id: 'e7', source: 'solicitar-mapa', target: 'aguardar-mapa', condition: 'proximo' },
      { id: 'e8', source: 'aguardar-mapa', target: 'mapa-alterado', condition: 'proximo' },
      { id: 'e9', source: 'mapa-alterado', target: 'jaleco-branco', label: 'Normal', condition: 'nao' },
      { id: 'e10', source: 'mapa-alterado', target: 'confirma-has', label: 'Alterado', condition: 'sim' },
      { id: 'e11', source: 'confirma-has', target: 'estadiamento', condition: 'proximo' },
      { id: 'e12', source: 'estadiamento', target: 'exames-iniciais', condition: 'proximo' },
      { id: 'e13', source: 'exames-iniciais', target: 'fim-tratamento', condition: 'proximo' },
    ],
    doencasRelacionadas: ['hipertensao-arterial'],
    medicamentosRelacionados: ['losartana', 'enalapril', 'anlodipino', 'hidroclorotiazida'],
    calculadorasRelacionadas: ['risco-cv'],
    quickActionsDisponiveis: [],
    fonte: 'Diretrizes Brasileiras de Hipertens√£o Arterial - SBC 2020',
    lastUpdate: '2024-12',
    complexity: 'simples',
    tempoEstimado: '5 min',
    tags: ['has', 'hipertensao', 'diagnostico', 'mapa', 'pressao'],
  },

  // ==========================================================================
  // PROTOCOLO: ITU EM MULHERES
  // ==========================================================================
  {
    id: 'itu-mulher',
    titulo: 'ITU em Mulheres',
    subtitulo: 'Cistite n√£o complicada vs complicada',
    descricao: 'Protocolo para diagn√≥stico e tratamento de infec√ß√£o do trato urin√°rio em mulheres.',
    categoria: 'tratamento',
    ciap2Chapters: ['U'],
    entryNodeId: 'start',
    nodes: [
      {
        id: 'start',
        type: 'start',
        label: 'Mulher com sintomas urin√°rios',
        sublabel: 'Dis√∫ria, polaci√∫ria, urg√™ncia',
        position: { x: 250, y: 0 },
      },
      {
        id: 'avaliar-complicacao',
        type: 'decision',
        label: 'Fatores de complica√ß√£o?',
        details: 'Gestante, diabetes, imunossupress√£o, anormalidade urol√≥gica, cateter, ITU recente',
        position: { x: 250, y: 100 },
      },
      {
        id: 'itu-complicada',
        type: 'warning',
        label: 'ITU Complicada',
        details: 'Solicitar urocultura + antibiograma\nTratamento 7-14 dias',
        position: { x: 500, y: 200 },
      },
      {
        id: 'avaliar-pielonefrite',
        type: 'decision',
        label: 'Sinais de pielonefrite?',
        details: 'Febre, dor lombar, sinal de Giordano',
        position: { x: 250, y: 200 },
      },
      {
        id: 'pielonefrite',
        type: 'refer',
        label: 'Pielonefrite',
        sublabel: 'Avaliar interna√ß√£o',
        position: { x: 50, y: 300 },
      },
      {
        id: 'cistite-simples',
        type: 'action',
        label: 'Cistite n√£o complicada',
        details: 'Tratamento emp√≠rico sem urocultura',
        position: { x: 350, y: 300 },
      },
      {
        id: 'escolher-atb',
        type: 'prescribe',
        label: 'Escolha do antibi√≥tico',
        details: '1¬™ linha: Nitrofuranto√≠na 100mg 6/6h 5 dias\nOU Fosfomicina 3g dose √∫nica\n2¬™ linha: SMX-TMP 800/160mg 12/12h 3 dias',
        position: { x: 350, y: 400 },
        quickAction: {
          id: 'rx-itu',
          tipo: 'prescricao',
          titulo: 'Prescri√ß√£o ITU',
          conteudo: 'Nitrofuranto√≠na 100mg - 1cp VO 6/6h por 5 dias\nOU Fosfomicina 3g - sach√™ dose √∫nica',
        },
      },
      {
        id: 'orientacoes',
        type: 'action',
        label: 'Orienta√ß√µes',
        details: 'Hidrata√ß√£o abundante\nUrinar ap√≥s rela√ß√£o sexual\nRetornar se febre ou n√£o melhora em 48-72h',
        position: { x: 350, y: 500 },
        quickAction: {
          id: 'orient-itu',
          tipo: 'orientacao',
          titulo: 'Orienta√ß√µes ITU',
          conteudo: 'Beber bastante l√≠quido. Urinar ap√≥s rela√ß√µes sexuais. Retornar se apresentar febre ou n√£o melhorar em 48-72 horas.',
        },
      },
      {
        id: 'fim',
        type: 'end',
        label: 'Tratamento conclu√≠do',
        position: { x: 350, y: 600 },
      },
    ],
    edges: [
      { id: 'e1', source: 'start', target: 'avaliar-complicacao', condition: 'proximo' },
      { id: 'e2', source: 'avaliar-complicacao', target: 'itu-complicada', label: 'Sim', condition: 'sim' },
      { id: 'e3', source: 'avaliar-complicacao', target: 'avaliar-pielonefrite', label: 'N√£o', condition: 'nao' },
      { id: 'e4', source: 'avaliar-pielonefrite', target: 'pielonefrite', label: 'Sim', condition: 'sim' },
      { id: 'e5', source: 'avaliar-pielonefrite', target: 'cistite-simples', label: 'N√£o', condition: 'nao' },
      { id: 'e6', source: 'cistite-simples', target: 'escolher-atb', condition: 'proximo' },
      { id: 'e7', source: 'escolher-atb', target: 'orientacoes', condition: 'proximo' },
      { id: 'e8', source: 'orientacoes', target: 'fim', condition: 'proximo' },
    ],
    doencasRelacionadas: ['infeccao-urinaria'],
    medicamentosRelacionados: ['nitrofurantoina', 'fosfomicina', 'sulfametoxazol-trimetoprima'],
    calculadorasRelacionadas: [],
    quickActionsDisponiveis: [],
    fonte: 'Diretrizes Brasileiras de Infec√ß√£o Urin√°ria - SBI',
    lastUpdate: '2024-12',
    complexity: 'simples',
    tempoEstimado: '3 min',
    tags: ['itu', 'cistite', 'urinaria', 'mulher'],
  },

  // ==========================================================================
  // PROTOCOLO: PHQ-9 PARA DEPRESS√ÉO
  // ==========================================================================
  {
    id: 'depressao-phq9',
    titulo: 'Avalia√ß√£o de Depress√£o com PHQ-9',
    subtitulo: 'Rastreamento e estratifica√ß√£o de gravidade',
    descricao: 'Protocolo de avalia√ß√£o de depress√£o utilizando o question√°rio PHQ-9.',
    categoria: 'diagnostico',
    ciap2Chapters: ['P'],
    entryNodeId: 'start',
    nodes: [
      {
        id: 'start',
        type: 'start',
        label: 'Paciente com queixa de tristeza/des√¢nimo',
        position: { x: 250, y: 0 },
      },
      {
        id: 'phq2',
        type: 'decision',
        label: 'PHQ-2 positivo?',
        details: '1. Pouco interesse ou prazer?\n2. Sentindo-se para baixo ou sem esperan√ßa?',
        position: { x: 250, y: 100 },
      },
      {
        id: 'descarta',
        type: 'end',
        label: 'Baixa probabilidade de depress√£o',
        sublabel: 'Considerar outras causas',
        position: { x: 50, y: 200 },
      },
      {
        id: 'phq9',
        type: 'calculate',
        label: 'Aplicar PHQ-9 completo',
        details: 'Pontua√ß√£o de 0-27',
        position: { x: 400, y: 200 },
      },
      {
        id: 'avaliar-score',
        type: 'decision',
        label: 'Pontua√ß√£o PHQ-9',
        position: { x: 400, y: 300 },
      },
      {
        id: 'minima',
        type: 'action',
        label: 'Depress√£o m√≠nima (0-4)',
        details: 'Acompanhamento e suporte',
        position: { x: 100, y: 400 },
      },
      {
        id: 'leve',
        type: 'action',
        label: 'Depress√£o leve (5-9)',
        details: 'Psicoeduca√ß√£o + MEV\nConsiderar psicoterapia',
        position: { x: 250, y: 400 },
      },
      {
        id: 'moderada',
        type: 'prescribe',
        label: 'Depress√£o moderada (10-14)',
        details: 'Iniciar ISRS\nFluoxetina 20mg/dia ou Sertralina 50mg/dia',
        position: { x: 400, y: 400 },
        quickAction: {
          id: 'rx-depressao-mod',
          tipo: 'prescricao',
          titulo: 'Prescri√ß√£o Depress√£o',
          conteudo: 'Fluoxetina 20mg - 1cp VO 1x/dia pela manh√£',
        },
      },
      {
        id: 'grave',
        type: 'warning',
        label: 'Depress√£o grave (15-27)',
        details: 'ISRS + Encaminhar psiquiatria\nAvaliar risco suicida',
        position: { x: 550, y: 400 },
      },
      {
        id: 'avaliar-suicidio',
        type: 'decision',
        label: 'Quest√£o 9 positiva?',
        details: 'Pensamentos de morte ou autoles√£o',
        position: { x: 400, y: 500 },
      },
      {
        id: 'risco-suicida',
        type: 'refer',
        label: 'üö® RISCO SUICIDA',
        details: 'Avalia√ß√£o psiqui√°trica urgente\nN√£o deixar sozinho',
        position: { x: 550, y: 600 },
      },
      {
        id: 'acompanhamento',
        type: 'action',
        label: 'Agendar retorno',
        details: '2-4 semanas para reavalia√ß√£o\nRepetir PHQ-9',
        position: { x: 250, y: 600 },
      },
      {
        id: 'fim',
        type: 'end',
        label: 'Seguimento regular',
        position: { x: 250, y: 700 },
      },
    ],
    edges: [
      { id: 'e1', source: 'start', target: 'phq2', condition: 'proximo' },
      { id: 'e2', source: 'phq2', target: 'descarta', label: 'N√£o', condition: 'nao' },
      { id: 'e3', source: 'phq2', target: 'phq9', label: 'Sim', condition: 'sim' },
      { id: 'e4', source: 'phq9', target: 'avaliar-score', condition: 'proximo' },
      { id: 'e5', source: 'avaliar-score', target: 'minima', label: '0-4' },
      { id: 'e6', source: 'avaliar-score', target: 'leve', label: '5-9' },
      { id: 'e7', source: 'avaliar-score', target: 'moderada', label: '10-14' },
      { id: 'e8', source: 'avaliar-score', target: 'grave', label: '15-27' },
      { id: 'e9', source: 'moderada', target: 'avaliar-suicidio', condition: 'proximo' },
      { id: 'e10', source: 'grave', target: 'avaliar-suicidio', condition: 'proximo' },
      { id: 'e11', source: 'avaliar-suicidio', target: 'risco-suicida', label: 'Sim', condition: 'sim' },
      { id: 'e12', source: 'avaliar-suicidio', target: 'acompanhamento', label: 'N√£o', condition: 'nao' },
      { id: 'e13', source: 'minima', target: 'acompanhamento', condition: 'proximo' },
      { id: 'e14', source: 'leve', target: 'acompanhamento', condition: 'proximo' },
      { id: 'e15', source: 'acompanhamento', target: 'fim', condition: 'proximo' },
    ],
    doencasRelacionadas: ['depressao'],
    medicamentosRelacionados: ['fluoxetina', 'sertralina'],
    calculadorasRelacionadas: ['phq-9'],
    quickActionsDisponiveis: [],
    fonte: 'Minist√©rio da Sa√∫de - Protocolo de Depress√£o na APS',
    lastUpdate: '2024-12',
    complexity: 'moderado',
    tempoEstimado: '10 min',
    tags: ['depressao', 'phq9', 'saude-mental', 'tristeza'],
  },

  // ==========================================================================
  // PROTOCOLO: LOMBALGIA - RED FLAGS
  // ==========================================================================
  {
    id: 'lombalgia-red-flags',
    titulo: 'Lombalgia - Sinais de Alarme',
    subtitulo: 'Identifica√ß√£o de causas graves',
    descricao: 'Protocolo para avalia√ß√£o de red flags em pacientes com lombalgia.',
    categoria: 'diagnostico',
    ciap2Chapters: ['L'],
    entryNodeId: 'start',
    nodes: [
      {
        id: 'start',
        type: 'start',
        label: 'Paciente com lombalgia',
        position: { x: 250, y: 0 },
      },
      {
        id: 'tempo',
        type: 'decision',
        label: 'Dura√ß√£o da dor',
        position: { x: 250, y: 100 },
      },
      {
        id: 'aguda',
        type: 'info',
        label: 'Lombalgia aguda (<6 semanas)',
        position: { x: 100, y: 200 },
      },
      {
        id: 'cronica',
        type: 'info',
        label: 'Lombalgia cr√¥nica (‚â•12 semanas)',
        details: 'Investiga√ß√£o mais detalhada',
        position: { x: 400, y: 200 },
      },
      {
        id: 'red-flags',
        type: 'warning',
        label: 'Avaliar RED FLAGS',
        details: '‚Ä¢ Trauma significativo\n‚Ä¢ Idade <20 ou >55 anos\n‚Ä¢ Perda de peso\n‚Ä¢ Hist√≥ria de c√¢ncer\n‚Ä¢ Uso de corticoide cr√¥nico\n‚Ä¢ Febre\n‚Ä¢ D√©ficit neurol√≥gico',
        position: { x: 250, y: 300 },
      },
      {
        id: 'tem-red-flag',
        type: 'decision',
        label: 'Algum red flag presente?',
        position: { x: 250, y: 430 },
      },
      {
        id: 'investigar',
        type: 'action',
        label: 'Investiga√ß√£o complementar',
        details: 'RX coluna lombar\nHemograma, VHS, PCR\nConsiderar RM',
        position: { x: 450, y: 530 },
      },
      {
        id: 'tratamento-conservador',
        type: 'prescribe',
        label: 'Tratamento conservador',
        details: 'Paracetamol 500-1000mg 6/6h\nIbuprofeno 400-600mg 8/8h\nEvitar repouso absoluto',
        position: { x: 50, y: 530 },
        quickAction: {
          id: 'rx-lombalgia',
          tipo: 'prescricao',
          titulo: 'Prescri√ß√£o Lombalgia',
          conteudo: 'Paracetamol 750mg - 1cp VO 6/6h SN\nIbuprofeno 600mg - 1cp VO 8/8h por 5 dias',
        },
      },
      {
        id: 'orientacoes',
        type: 'action',
        label: 'Orienta√ß√µes',
        details: 'Manter atividades leves\nCalor local\nExerc√≠cios de alongamento\nRetornar se piora ou d√©ficit motor',
        position: { x: 50, y: 630 },
      },
      {
        id: 'reavaliacao',
        type: 'action',
        label: 'Reavalia√ß√£o em 2-4 semanas',
        details: 'Se n√£o melhora: fisioterapia\nSe piora: investigar',
        position: { x: 250, y: 730 },
      },
      {
        id: 'fim',
        type: 'end',
        label: 'Seguimento conforme evolu√ß√£o',
        position: { x: 250, y: 830 },
      },
    ],
    edges: [
      { id: 'e1', source: 'start', target: 'tempo', condition: 'proximo' },
      { id: 'e2', source: 'tempo', target: 'aguda', label: '<6 sem' },
      { id: 'e3', source: 'tempo', target: 'cronica', label: '‚â•12 sem' },
      { id: 'e4', source: 'aguda', target: 'red-flags', condition: 'proximo' },
      { id: 'e5', source: 'cronica', target: 'red-flags', condition: 'proximo' },
      { id: 'e6', source: 'red-flags', target: 'tem-red-flag', condition: 'proximo' },
      { id: 'e7', source: 'tem-red-flag', target: 'investigar', label: 'Sim', condition: 'sim' },
      { id: 'e8', source: 'tem-red-flag', target: 'tratamento-conservador', label: 'N√£o', condition: 'nao' },
      { id: 'e9', source: 'tratamento-conservador', target: 'orientacoes', condition: 'proximo' },
      { id: 'e10', source: 'orientacoes', target: 'reavaliacao', condition: 'proximo' },
      { id: 'e11', source: 'investigar', target: 'reavaliacao', condition: 'proximo' },
      { id: 'e12', source: 'reavaliacao', target: 'fim', condition: 'proximo' },
    ],
    doencasRelacionadas: ['lombalgia'],
    medicamentosRelacionados: ['paracetamol', 'ibuprofeno', 'dipirona'],
    calculadorasRelacionadas: ['start-back'],
    quickActionsDisponiveis: [],
    fonte: 'Caderno de Aten√ß√£o B√°sica - Dor Lombar',
    lastUpdate: '2024-12',
    complexity: 'simples',
    tempoEstimado: '5 min',
    tags: ['lombalgia', 'dor', 'costas', 'red-flags'],
  },

  // ==========================================================================
  // PROTOCOLO: TRATAMENTO DE HAS
  // ==========================================================================
  {
    id: 'has-tratamento',
    titulo: 'Tratamento de Hipertens√£o Arterial',
    subtitulo: 'Escolha de anti-hipertensivos',
    descricao: 'Protocolo para in√≠cio e escalonamento do tratamento anti-hipertensivo.',
    categoria: 'tratamento',
    ciap2Chapters: ['K'],
    entryNodeId: 'start',
    nodes: [
      {
        id: 'start',
        type: 'start',
        label: 'HAS confirmada',
        sublabel: 'Definir estrat√©gia terap√™utica',
        position: { x: 250, y: 0 },
      },
      {
        id: 'avaliar-estagio',
        type: 'decision',
        label: 'Qual o est√°gio?',
        details: 'E1: 140-159/90-99\nE2: 160-179/100-109\nE3: ‚â•180/110',
        position: { x: 250, y: 100 },
      },
      {
        id: 'estagio1',
        type: 'action',
        label: 'Est√°gio 1 - Baixo risco',
        details: 'Monoterapia inicial',
        position: { x: 50, y: 200 },
      },
      {
        id: 'estagio2',
        type: 'action',
        label: 'Est√°gio 2-3 ou Alto risco',
        details: 'Combina√ß√£o de 2 f√°rmacos',
        position: { x: 400, y: 200 },
      },
      {
        id: 'escolher-mono',
        type: 'prescribe',
        label: 'Escolha: IECA, BRA, BCC ou DIU',
        details: 'Losartana 50mg/dia OU\nEnalapril 10mg 12/12h OU\nAnlodipino 5mg/dia OU\nHCTZ 25mg/dia',
        position: { x: 50, y: 300 },
        quickAction: {
          id: 'rx-has-mono',
          tipo: 'prescricao',
          titulo: 'Monoterapia HAS',
          conteudo: 'Losartana 50mg - 1cp VO 1x/dia',
        },
      },
      {
        id: 'escolher-combo',
        type: 'prescribe',
        label: 'Combina√ß√µes preferidas',
        details: 'IECA/BRA + BCC OU\nIECA/BRA + DIU OU\nBCC + DIU',
        position: { x: 400, y: 300 },
        quickAction: {
          id: 'rx-has-combo',
          tipo: 'prescricao',
          titulo: 'Combina√ß√£o HAS',
          conteudo: 'Losartana 50mg + Anlodipino 5mg - 1cp de cada VO 1x/dia',
        },
      },
      {
        id: 'reavaliar',
        type: 'action',
        label: 'Reavaliar em 4-6 semanas',
        details: 'Meta PA: <140/90 (geral)\n<130/80 (alto risco, DM, DRC)',
        position: { x: 250, y: 400 },
      },
      {
        id: 'atingiu-meta',
        type: 'decision',
        label: 'Atingiu meta?',
        position: { x: 250, y: 500 },
      },
      {
        id: 'manter',
        type: 'end',
        label: 'Manter tratamento',
        sublabel: 'Consultas a cada 3-6 meses',
        position: { x: 50, y: 600 },
      },
      {
        id: 'intensificar',
        type: 'action',
        label: 'Intensificar',
        details: 'Aumentar dose OU\nAdicionar 2¬∫/3¬∫ f√°rmaco',
        position: { x: 400, y: 600 },
      },
      {
        id: 'fim',
        type: 'end',
        label: 'Seguir fluxo',
        position: { x: 400, y: 700 },
      },
    ],
    edges: [
      { id: 'e1', source: 'start', target: 'avaliar-estagio', condition: 'proximo' },
      { id: 'e2', source: 'avaliar-estagio', target: 'estagio1', label: 'E1 baixo risco' },
      { id: 'e3', source: 'avaliar-estagio', target: 'estagio2', label: 'E2-3 ou alto risco' },
      { id: 'e4', source: 'estagio1', target: 'escolher-mono', condition: 'proximo' },
      { id: 'e5', source: 'estagio2', target: 'escolher-combo', condition: 'proximo' },
      { id: 'e6', source: 'escolher-mono', target: 'reavaliar', condition: 'proximo' },
      { id: 'e7', source: 'escolher-combo', target: 'reavaliar', condition: 'proximo' },
      { id: 'e8', source: 'reavaliar', target: 'atingiu-meta', condition: 'proximo' },
      { id: 'e9', source: 'atingiu-meta', target: 'manter', label: 'Sim', condition: 'sim' },
      { id: 'e10', source: 'atingiu-meta', target: 'intensificar', label: 'N√£o', condition: 'nao' },
      { id: 'e11', source: 'intensificar', target: 'fim', condition: 'proximo' },
    ],
    doencasRelacionadas: ['hipertensao-arterial'],
    medicamentosRelacionados: ['losartana', 'enalapril', 'anlodipino', 'hidroclorotiazida'],
    calculadorasRelacionadas: ['risco-cv'],
    quickActionsDisponiveis: [],
    fonte: 'Diretrizes Brasileiras de Hipertens√£o Arterial - SBC 2020',
    lastUpdate: '2024-12',
    complexity: 'moderado',
    tempoEstimado: '5 min',
    tags: ['has', 'tratamento', 'anti-hipertensivo'],
  },

  // ==========================================================================
  // PROTOCOLO: DM2 - TRATAMENTO
  // ==========================================================================
  {
    id: 'dm2-tratamento',
    titulo: 'Tratamento do Diabetes Mellitus tipo 2',
    subtitulo: 'Escalonamento terap√™utico',
    descricao: 'Protocolo para tratamento e escalonamento terap√™utico do DM2.',
    categoria: 'tratamento',
    ciap2Chapters: ['T'],
    entryNodeId: 'start',
    nodes: [
      {
        id: 'start',
        type: 'start',
        label: 'DM2 diagnosticado',
        position: { x: 250, y: 0 },
      },
      {
        id: 'mev',
        type: 'action',
        label: 'MEV para todos',
        details: 'Dieta equilibrada\nAtividade f√≠sica 150min/sem\nPerda de peso 5-10%',
        position: { x: 250, y: 100 },
      },
      {
        id: 'hba1c-inicial',
        type: 'decision',
        label: 'HbA1c no diagn√≥stico',
        position: { x: 250, y: 200 },
      },
      {
        id: 'hba1c-leve',
        type: 'prescribe',
        label: 'HbA1c < 7,5%',
        details: 'Metformina monoterapia\n500mg 2x/dia, aumentar gradualmente',
        position: { x: 50, y: 300 },
        quickAction: {
          id: 'rx-dm2-met',
          tipo: 'prescricao',
          titulo: 'Metformina',
          conteudo: 'Metformina 500mg - 1cp VO no almo√ßo por 2 semanas, depois 1cp no almo√ßo e 1cp no jantar',
        },
      },
      {
        id: 'hba1c-mod',
        type: 'prescribe',
        label: 'HbA1c 7,5-9%',
        details: 'Metformina + 2¬∫ agente\n(Gliclazida, iDPP4, iSGLT2)',
        position: { x: 250, y: 300 },
      },
      {
        id: 'hba1c-alta',
        type: 'prescribe',
        label: 'HbA1c > 9%',
        details: 'Considerar insulina\n+ Metformina',
        position: { x: 450, y: 300 },
      },
      {
        id: 'reavaliar',
        type: 'action',
        label: 'Reavaliar em 3 meses',
        details: 'HbA1c, glicemia, sintomas',
        position: { x: 250, y: 450 },
      },
      {
        id: 'meta',
        type: 'decision',
        label: 'Meta HbA1c atingida?',
        details: '<7% (geral)\n<8% (idosos, complica√ß√µes)',
        position: { x: 250, y: 550 },
      },
      {
        id: 'manter',
        type: 'end',
        label: 'Manter tratamento',
        position: { x: 50, y: 650 },
      },
      {
        id: 'escalonar',
        type: 'action',
        label: 'Adicionar/intensificar',
        details: 'Adicionar 2¬∫/3¬∫ agente\nOu iniciar insulina basal',
        position: { x: 400, y: 650 },
      },
      {
        id: 'fim',
        type: 'end',
        label: 'Continuar seguimento',
        position: { x: 250, y: 750 },
      },
    ],
    edges: [
      { id: 'e1', source: 'start', target: 'mev', condition: 'proximo' },
      { id: 'e2', source: 'mev', target: 'hba1c-inicial', condition: 'proximo' },
      { id: 'e3', source: 'hba1c-inicial', target: 'hba1c-leve', label: '<7,5%' },
      { id: 'e4', source: 'hba1c-inicial', target: 'hba1c-mod', label: '7,5-9%' },
      { id: 'e5', source: 'hba1c-inicial', target: 'hba1c-alta', label: '>9%' },
      { id: 'e6', source: 'hba1c-leve', target: 'reavaliar', condition: 'proximo' },
      { id: 'e7', source: 'hba1c-mod', target: 'reavaliar', condition: 'proximo' },
      { id: 'e8', source: 'hba1c-alta', target: 'reavaliar', condition: 'proximo' },
      { id: 'e9', source: 'reavaliar', target: 'meta', condition: 'proximo' },
      { id: 'e10', source: 'meta', target: 'manter', label: 'Sim', condition: 'sim' },
      { id: 'e11', source: 'meta', target: 'escalonar', label: 'N√£o', condition: 'nao' },
      { id: 'e12', source: 'manter', target: 'fim', condition: 'proximo' },
      { id: 'e13', source: 'escalonar', target: 'fim', condition: 'proximo' },
    ],
    doencasRelacionadas: ['diabetes-mellitus-2'],
    medicamentosRelacionados: ['metformina', 'gliclazida', 'insulina-nph'],
    calculadorasRelacionadas: ['ckd-epi'],
    quickActionsDisponiveis: [],
    fonte: 'Diretrizes SBD 2024',
    lastUpdate: '2024-12',
    complexity: 'moderado',
    tempoEstimado: '7 min',
    tags: ['diabetes', 'dm2', 'tratamento', 'metformina'],
  },

  // ==========================================================================
  // PROTOCOLO: ASMA - CLASSIFICA√á√ÉO GINA
  // ==========================================================================
  {
    id: 'asma-gina',
    titulo: 'Classifica√ß√£o e Tratamento da Asma (GINA)',
    subtitulo: 'Steps 1-5',
    descricao: 'Protocolo baseado no GINA 2024 para classifica√ß√£o e tratamento da asma.',
    categoria: 'tratamento',
    ciap2Chapters: ['R'],
    entryNodeId: 'start',
    nodes: [
      {
        id: 'start',
        type: 'start',
        label: 'Asma diagnosticada',
        position: { x: 250, y: 0 },
      },
      {
        id: 'avaliar-controle',
        type: 'decision',
        label: 'N√≠vel de controle atual',
        details: 'Sintomas diurnos?\nDespertares noturnos?\nUso de resgate?\nLimita√ß√£o atividades?',
        position: { x: 250, y: 100 },
      },
      {
        id: 'controlada',
        type: 'info',
        label: 'Controlada',
        details: 'Nenhum crit√©rio ou sintomas ‚â§2x/sem',
        position: { x: 50, y: 200 },
      },
      {
        id: 'parcial',
        type: 'info',
        label: 'Parcialmente controlada',
        details: '1-2 crit√©rios presentes',
        position: { x: 250, y: 200 },
      },
      {
        id: 'nao-controlada',
        type: 'warning',
        label: 'N√£o controlada',
        details: '3-4 crit√©rios presentes',
        position: { x: 450, y: 200 },
      },
      {
        id: 'step1',
        type: 'prescribe',
        label: 'Step 1 (sintomas raros)',
        details: 'CI + formoterol SOS\nOU CI baixa dose cont√≠nuo',
        position: { x: 50, y: 350 },
      },
      {
        id: 'step2',
        type: 'prescribe',
        label: 'Step 2 (intermitente)',
        details: 'CI dose baixa di√°rio\nBeclometasona 200mcg/dia',
        position: { x: 200, y: 350 },
      },
      {
        id: 'step3',
        type: 'prescribe',
        label: 'Step 3 (persistente leve)',
        details: 'CI dose baixa + LABA\nOu CI dose m√©dia',
        position: { x: 350, y: 350 },
      },
      {
        id: 'step4-5',
        type: 'refer',
        label: 'Step 4-5 (moderada/grave)',
        details: 'CI dose m√©dia/alta + LABA\nConsiderar encaminhamento',
        position: { x: 500, y: 350 },
      },
      {
        id: 'orientacoes',
        type: 'action',
        label: 'Orienta√ß√µes gerais',
        details: 'T√©cnica inalat√≥ria\nPlano de a√ß√£o\nEvitar gatilhos\nRetorno em 1-3 meses',
        position: { x: 250, y: 500 },
      },
      {
        id: 'fim',
        type: 'end',
        label: 'Seguimento regular',
        position: { x: 250, y: 600 },
      },
    ],
    edges: [
      { id: 'e1', source: 'start', target: 'avaliar-controle', condition: 'proximo' },
      { id: 'e2', source: 'avaliar-controle', target: 'controlada', label: 'Controlada' },
      { id: 'e3', source: 'avaliar-controle', target: 'parcial', label: 'Parcial' },
      { id: 'e4', source: 'avaliar-controle', target: 'nao-controlada', label: 'N√£o controlada' },
      { id: 'e5', source: 'controlada', target: 'step1', condition: 'proximo' },
      { id: 'e6', source: 'parcial', target: 'step2', label: 'Leve' },
      { id: 'e7', source: 'parcial', target: 'step3', label: 'Moderada' },
      { id: 'e8', source: 'nao-controlada', target: 'step4-5', condition: 'proximo' },
      { id: 'e9', source: 'step1', target: 'orientacoes', condition: 'proximo' },
      { id: 'e10', source: 'step2', target: 'orientacoes', condition: 'proximo' },
      { id: 'e11', source: 'step3', target: 'orientacoes', condition: 'proximo' },
      { id: 'e12', source: 'step4-5', target: 'orientacoes', condition: 'proximo' },
      { id: 'e13', source: 'orientacoes', target: 'fim', condition: 'proximo' },
    ],
    doencasRelacionadas: ['asma'],
    medicamentosRelacionados: ['salbutamol', 'beclometasona'],
    calculadorasRelacionadas: [],
    quickActionsDisponiveis: [],
    fonte: 'GINA 2024',
    lastUpdate: '2024-12',
    complexity: 'moderado',
    tempoEstimado: '5 min',
    tags: ['asma', 'gina', 'corticoide', 'inalatorio'],
  },

  // ==========================================================================
  // PROTOCOLO: CEFALEIA - SINAIS DE ALARME
  // ==========================================================================
  {
    id: 'cefaleia-alarme',
    titulo: 'Cefaleia - Sinais de Alarme (SNOOP)',
    subtitulo: 'Quando investigar',
    descricao: 'Protocolo para identifica√ß√£o de cefaleias secund√°rias que requerem investiga√ß√£o.',
    categoria: 'diagnostico',
    ciap2Chapters: ['N'],
    entryNodeId: 'start',
    nodes: [
      {
        id: 'start',
        type: 'start',
        label: 'Paciente com cefaleia',
        position: { x: 250, y: 0 },
      },
      {
        id: 'snoop',
        type: 'warning',
        label: 'Avaliar SNOOP',
        details: 'S - Systemic (febre, perda peso, HIV, c√¢ncer)\nN - Neurologic (d√©ficit focal)\nO - Onset (s√∫bita, thunderclap)\nO - Older (>50 anos, nova cefaleia)\nP - Pattern (mudan√ßa de padr√£o)',
        position: { x: 250, y: 100 },
      },
      {
        id: 'tem-snoop',
        type: 'decision',
        label: 'Algum SNOOP presente?',
        position: { x: 250, y: 250 },
      },
      {
        id: 'investigar',
        type: 'action',
        label: 'Investiga√ß√£o obrigat√≥ria',
        details: 'Neuroimagem (TC/RM)\nPun√ß√£o lombar se suspeita de meningite\nExames laboratoriais',
        position: { x: 450, y: 350 },
      },
      {
        id: 'cefaleia-primaria',
        type: 'decision',
        label: 'Caracter√≠sticas da cefaleia',
        position: { x: 50, y: 350 },
      },
      {
        id: 'tensional',
        type: 'action',
        label: 'Cefaleia Tensional',
        details: 'Bilateral, press√£o/aperto\nLeve a moderada\nN√£o piora com atividade',
        position: { x: -100, y: 450 },
      },
      {
        id: 'enxaqueca',
        type: 'action',
        label: 'Enxaqueca',
        details: 'Unilateral, puls√°til\nModerada a intensa\nN√°usea, foto/fonofobia',
        position: { x: 100, y: 450 },
      },
      {
        id: 'tx-tensional',
        type: 'prescribe',
        label: 'Tratamento Tensional',
        details: 'Agudo: Paracetamol/Ibuprofeno\nProfilaxia: Amitriptilina 10-25mg',
        position: { x: -100, y: 550 },
      },
      {
        id: 'tx-enxaqueca',
        type: 'prescribe',
        label: 'Tratamento Enxaqueca',
        details: 'Agudo: Ibuprofeno ¬± Triptano\nProfilaxia se ‚â•4 crises/m√™s',
        position: { x: 100, y: 550 },
      },
      {
        id: 'fim',
        type: 'end',
        label: 'Seguimento',
        position: { x: 250, y: 650 },
      },
    ],
    edges: [
      { id: 'e1', source: 'start', target: 'snoop', condition: 'proximo' },
      { id: 'e2', source: 'snoop', target: 'tem-snoop', condition: 'proximo' },
      { id: 'e3', source: 'tem-snoop', target: 'investigar', label: 'Sim', condition: 'sim' },
      { id: 'e4', source: 'tem-snoop', target: 'cefaleia-primaria', label: 'N√£o', condition: 'nao' },
      { id: 'e5', source: 'cefaleia-primaria', target: 'tensional', label: 'Tensional' },
      { id: 'e6', source: 'cefaleia-primaria', target: 'enxaqueca', label: 'Enxaqueca' },
      { id: 'e7', source: 'tensional', target: 'tx-tensional', condition: 'proximo' },
      { id: 'e8', source: 'enxaqueca', target: 'tx-enxaqueca', condition: 'proximo' },
      { id: 'e9', source: 'tx-tensional', target: 'fim', condition: 'proximo' },
      { id: 'e10', source: 'tx-enxaqueca', target: 'fim', condition: 'proximo' },
      { id: 'e11', source: 'investigar', target: 'fim', condition: 'proximo' },
    ],
    doencasRelacionadas: ['cefaleia-tensional', 'enxaqueca'],
    medicamentosRelacionados: ['paracetamol', 'ibuprofeno', 'amitriptilina'],
    calculadorasRelacionadas: [],
    quickActionsDisponiveis: [],
    fonte: 'IHS 2018 / Tratado MFC',
    lastUpdate: '2024-12',
    complexity: 'simples',
    tempoEstimado: '5 min',
    tags: ['cefaleia', 'enxaqueca', 'dor-cabeca', 'snoop'],
  },
];

// =============================================================================
// FUN√á√ïES AUXILIARES
// =============================================================================

export function getAllProtocolos(): ProtocoloInterativo[] {
  return protocolos;
}

export function getProtocoloById(id: string): ProtocoloInterativo | undefined {
  return protocolos.find(p => p.id === id);
}

export function getProtocolosByCategoria(categoria: ProtocoloInterativo['categoria']): ProtocoloInterativo[] {
  return protocolos.filter(p => p.categoria === categoria);
}

export function getProtocolosByDoenca(doencaId: string): ProtocoloInterativo[] {
  return protocolos.filter(p => p.doencasRelacionadas.includes(doencaId));
}

export function searchProtocolos(query: string): ProtocoloInterativo[] {
  const normalizedQuery = query.toLowerCase().trim();
  return protocolos.filter(p => 
    p.titulo.toLowerCase().includes(normalizedQuery) ||
    p.tags.some(t => t.toLowerCase().includes(normalizedQuery))
  );
}

